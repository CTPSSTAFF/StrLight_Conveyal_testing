library(r5r)
options(java.parameters = "-Xmx25G")
rJava::.jinit()
path <- "C:/Users/bbact/Desktop/r5r_directory"
r5r_core <- setup_r5(data_path = path, verbose = T)
library(r5r)
library(tidyverse)
library(sf)
rJava::.jinit()
options(java.parameters = "-Xmx75G")
taz_grid <- st_read("Data/StreetLight/TAZ_Centroids/grid_100m_nowat_roads.shp")
taz_grid$id <- seq.int(nrow(taz_grid))
taz_xy <- taz_grid %>%
mutate(long = unlist(map(taz_grid$geometry,1)),
lat = unlist(map(taz_grid$geometry,2))) %>%
select(id,geometry,lat,long)
path <- "C:/Users/bbact/Desktop/r5r_directory"
r5r_core <- setup_r5(data_path = path, verbose = T)
library(tictoc)
tic()
tock()
toc()
tic()
tic()
# 3.1) calculate a travel time matrix
ttm <- travel_time_matrix(r5r_core = r5r_core,
origins = taz_xy,
destinations = taz_xy,
mode = mode,
departure_datetime = departure_datetime,
max_walk_dist = max_walk_dist,
max_trip_duration = max_trip_duration,
breakdown = TRUE,
verbose = TRUE,
progress = TRUE,
breakdown_stat = "min")
time_to_calculate <- toc()
r5r_core <- setup_r5(data_path = path, verbose = F)
library(r5r)
library(tidyverse)
library(sf)
library(tictoc)
options(java.parameters = "-Xmx75G")
rJava::.jinit()
path <- "C:/Users/bbact/Desktop/r5r_directory"
r5r_core <- setup_r5(data_path = path, verbose = F)
taz_grid <- st_read("Data/StreetLight/TAZ_Centroids/Moderate_400m_grid.shp")
taz_grid$id <- seq.int(nrow(taz_grid))
taz_xy <- taz_grid %>%
mutate(long = unlist(map(taz_grid$geometry,1)),
lat = unlist(map(taz_grid$geometry,2))) %>%
select(id,geometry,lat,long)
mode <- c("WALK", "TRANSIT")
max_walk_dist <- 1600   # meters
max_trip_duration <- 120 # minutes
departure_datetime <- as.POSIXct("13-05-2019 14:00:00",
format = "%d-%m-%Y %H:%M:%S")
tic()
# 3.1) calculate a travel time matrix
ttm <- travel_time_matrix(r5r_core = r5r_core,
origins = taz_xy,
destinations = taz_xy,
mode = mode,
departure_datetime = departure_datetime,
max_walk_dist = max_walk_dist,
max_trip_duration = max_trip_duration,
breakdown = TRUE,
verbose = FALSE,
progress = TRUE,
breakdown_stat = "min")
time_to_calculate <- toc()
View(ttm)
View(taz_xy)
